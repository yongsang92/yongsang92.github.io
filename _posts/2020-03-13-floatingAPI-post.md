---
title: "floating population API"
date: 2020-02-20
categories: Projects
tags: SpringRestDocs SpringHATEOAS
---


[소감]

-Spring Rest Docs 적용 후기
API를 활용하여 개발을 할때 시간이 많이 걸리는 이유중 하나는 프로파일의 부재입니다.
프로파일이 제공되지 않으면 API를 이용하는개발자는 어쩔수 없이 API를 직접테스트해서 결과를 파악해야됩니다. 이런 테스트를 하지 않을수 있다면 개발 시간을 단축시킬 수 있습니다
API를 만드는 개발자도 역시 프로파일의 중요성을 알고있습니다. 하지만 프로파일을 만드는 시간과 노력도 만만치 않기 때문에 프로파일을 만드는건 쉬운 작업이 아닙니다
이런 고민을 Spring Rest Doc를 이용해 해결할 수 있었습니다.  테스트 결과를 파일로 생성해주고 결과파일을 HTML 로 손쉽게 만들어주기 때문에 API를 만들때 Spring Rest Docs를 사용하는건 정말 쉬운 선택이었습니다

-Spring HATEOAS 적용 후기
RESTful 한 웹서비스를 만족시키는 마지막 단계는 HATEOAS입니다
HATEOAS,Hypermedia As The Engine Of Application State에 대한 길고 지루한 설명이 많이 있지만 HATEOAS에 대한 설명은 이  한 단어면 충분합니다
"affordance,행동 유도성" 행동 유도성이란 특정한 행동을 하게 유도하거나, 쉽게 하게 하는 성질입니다. 예를 들면 무거운 물건을 들고 있을때 평평한 책상은 물건을 놓게 유도하듯이
상대방의 행동을 자연스럽게 다음 행동(상태)로 유도하는 심리학 언어입니다
심리학 언어가 API 서비스와 무슨상관이냐 할 수 있겠지만 이는 웹 전반에서 아주 유용한 개념입니다
두 개의 예를 들어겠습니다
1. 은행 API를 사용하는 사용자의 잔액이 0원 이라면 API는 "입금"으로 가는 서비스를 제공해야지 "출금"으로 가는 서비스를 제공하면 안됩니다 
2. 쇼핑몰 고객의  주문상태가 준비완료라면 "주문취소" 서비스를 제공하면 안되고 "후기작성"과 같은 서비스를 제공해야 됩니다
이 처럼 HATEOAS는 사용자에게 다음행동에 대한 선택을 고민할 필요없이 다음행동의 선택지를 바로 눈앞에 전달해줘서  자연스럽게 API를 탐색할 수 있게 도와줍니다

-프로젝트 후기
API 프로파일이 많이 지저분하다 
Spring Rest Docs를 후반에 도입했기 때문이라고 핑계댈수 있겠지만 애초에 설계를 잘못해서 그런거다 라는 생각이 든다
DB 설계 또한 고민을 많이 했다. 대략 1000개의 도로가 있고 1년에 4개의 데이터가 제공되니 1년에 4000개의 로우를 추가해야된다
이력테이블의 속성을 고려해 테이블을 도로이름당 하나씩 만들까 고민도 했지만 1년에 4000개면 많다고는 할 수 없다. 그리고 상권을 분석할때는 여러 도로를 살펴보기 때문에
하나의 테이블에 데이터를 저장하는게 보기도 쉽고 성능상 좋다고 판단했다
현재 제공받는 원천데이터에 대한 설명이 없어서 자세히 분석하지 못한것이 아쉽다







